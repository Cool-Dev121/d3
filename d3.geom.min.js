(function(){function D(c,i,d,a){var g,b,h;c=a[c];g=c[0];b=c[1];c=a[i];i=c[0];h=c[1];c=a[d];return(c[1]-b)*(i-g)-(h-b)*(c[0]-g)>0}function z(c,i,d){return(d[0]-i[0])*(c[1]-i[1])<(d[1]-i[1])*(c[0]-i[0])}function B(c,i,d,a){var g=c[0],b=d[0];c=c[1];var h=d[1];d=i[0]-g;var l=a[0]-b;i=i[1]-c;a=a[1]-h;b=(l*(c-h)-a*(g-b))/(a*d-l*i);return[g+b*d,c+b*i]}function C(c,i){var d={list:c.map(function(e,j){return{index:j,x:e[0],y:e[1]}}).sort(function(e,j){return e.y<j.y?-1:e.y>j.y?1:e.x<j.x?-1:e.x>j.x?1:0}),bottomSite:null},
a={list:[],leftEnd:null,rightEnd:null,init:function(){a.leftEnd=a.createHalfEdge(null,"l");a.rightEnd=a.createHalfEdge(null,"l");a.leftEnd.r=a.rightEnd;a.rightEnd.l=a.leftEnd;a.list.unshift(a.leftEnd,a.rightEnd)},createHalfEdge:function(e,j){return{edge:e,side:j,vertex:null,l:null,r:null}},insert:function(e,j){j.l=e;j.r=e.r;e.r.l=j;e.r=j},leftBound:function(e){var j=a.leftEnd;do j=j.r;while(j!=a.rightEnd&&g.rightOf(j,e));return j=j.l},del:function(e){e.l.r=e.r;e.r.l=e.l;e.edge=null},right:function(e){return e.r},
left:function(e){return e.l},leftRegion:function(e){return e.edge==null?d.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return e.edge==null?d.bottomSite:e.edge.region[A[e.side]]}},g={bisect:function(e,j){var f={region:{l:e,r:j},ep:{l:null,r:null}},m=j.x-e.x,p=j.y-e.y,t=m>0?m:-m,s=p>0?p:-p;f.c=e.x*m+e.y*p+(m*m+p*p)*0.5;if(t>s){f.a=1;f.b=p/m;f.c/=m}else{f.b=1;f.a=m/p;f.c/=p}return f},intersect:function(e,j){var f=e.edge,m=j.edge;if(!f||!m||f.region.r==m.region.r)return null;var p=f.a*m.b-
f.b*m.a;if(Math.abs(p)<1.0E-10)return null;var t=(f.c*m.b-m.c*f.b)/p;p=(m.c*f.a-f.c*m.a)/p;var s=f.region.r,y=m.region.r;if(s.y<y.y||s.y==y.y&&s.x<y.x){s=e;f=f}else{s=j;f=m}if((f=t>=f.region.r.x)&&s.side=="l"||!f&&s.side=="r")return null;return{x:t,y:p}},rightOf:function(e,j){var f=e.edge,m=f.region.r,p=j.x>m.x;if(p&&e.side=="l")return 1;if(!p&&e.side=="r")return 0;if(f.a==1){var t=j.y-m.y,s=j.x-m.x,y=0,v=0;if(!p&&f.b<0||p&&f.b>=0)v=y=t>=f.b*s;else{v=j.x+j.y*f.b>f.c;if(f.b<0)v=!v;v||(y=1)}if(!y){m=
m.x-f.region.l.x;v=f.b*(s*s-t*t)<m*t*(1+2*s/m+f.b*f.b);if(f.b<0)v=!v}}else{s=f.c-f.a*j.x;f=j.y-s;t=j.x-m.x;m=s-m.y;v=f*f>t*t+m*m}return e.side=="l"?v:!v},endPoint:function(e,j,f){e.ep[j]=f;e.ep[A[j]]&&i(e)},distance:function(e,j){var f=e.x-j.x,m=e.y-j.y;return Math.sqrt(f*f+m*m)}},b={list:[],insert:function(e,j,f){e.vertex=j;e.ystar=j.y+f;f=0;for(var m=b.list,p=m.length;f<p;f++){var t=m[f];if(!(e.ystar>t.ystar||e.ystar==t.ystar&&j.x>t.vertex.x))break}m.splice(f,0,e)},del:function(e){for(var j=0,f=
b.list,m=f.length;j<m&&f[j]!=e;++j);f.splice(j,1)},empty:function(){return b.list.length==0},nextEvent:function(e){for(var j=0,f=b.list,m=f.length;j<m;++j)if(f[j]==e)return f[j+1];return null},min:function(){var e=b.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return b.list.shift()}};a.init();d.bottomSite=d.list.shift();for(var h=d.list.shift(),l,k,n,q,w,o,u,r,x;;){b.empty()||(l=b.min());if(h&&(b.empty()||h.y<l.y||h.y==l.y&&h.x<l.x)){k=a.leftBound(h);n=a.right(k);u=a.rightRegion(k);
x=g.bisect(u,h);o=a.createHalfEdge(x,"l");a.insert(k,o);if(r=g.intersect(k,o)){b.del(k);b.insert(k,r,g.distance(r,h))}k=o;o=a.createHalfEdge(x,"r");a.insert(k,o);(r=g.intersect(o,n))&&b.insert(o,r,g.distance(r,h));h=d.list.shift()}else if(b.empty())break;else{k=b.extractMin();q=a.left(k);n=a.right(k);w=a.right(n);u=a.leftRegion(k);o=a.rightRegion(n);r=k.vertex;g.endPoint(k.edge,k.side,r);g.endPoint(n.edge,n.side,r);a.del(k);b.del(n);a.del(n);k="l";if(u.y>o.y){k=u;u=o;o=k;k="r"}x=g.bisect(u,o);o=a.createHalfEdge(x,
k);a.insert(q,o);g.endPoint(x,A[k],r);if(r=g.intersect(q,o)){b.del(q);b.insert(q,r,g.distance(r,u))}(r=g.intersect(o,w))&&b.insert(o,r,g.distance(r,u))}}for(k=a.right(a.leftEnd);k!=a.rightEnd;k=a.right(k))i(k.edge)}d3.geom={};d3.geom.contour=function(c,i){var d;if(!(d=i))a:{for(var a=d=0;;){if(c(d,a)){d=[d,a];break a}if(d==0){d=a+1;a=0}else{d-=1;a+=1}}d=void 0}d=d;a=[];var g=d[0],b=d[1],h=0,l=0,k=NaN,n=NaN;l=0;do{l=0;if(c(g-1,b-1))l+=1;if(c(g,b-1))l+=2;if(c(g-1,b))l+=4;if(c(g,b))l+=8;if(l==6){h=n==
-1?-1:1;l=0}else if(l==9){h=0;l=k==1?-1:1}else{h=E[l];l=F[l]}if(h!=k&&l!=n){a.push([g,b]);k=h;n=l}g+=h;b+=l}while(d[0]!=g||d[1]!=b);return a};var E=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],F=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];d3.geom.hull=function(c){if(c.length<3)return[];var i=c.length,d=i-1,a=[],g=[],b,h=0,l,k,n,q,w,o,u;for(b=1;b<i;++b)if(c[b][1]<c[h][1])h=b;else if(c[b][1]==c[h][1])h=c[b][0]<c[h][0]?b:h;for(b=0;b<i;++b)if(b!=h){k=c[b][1]-c[h][1];l=c[b][0]-c[h][0];a.push({angle:Math.atan2(k,
l),index:b})}a.sort(function(r,x){return r.angle-x.angle});u=a[0].angle;o=a[0].index;w=0;for(b=1;b<d;++b){i=a[b].index;if(u==a[b].angle){l=c[o][0]-c[h][0];k=c[o][1]-c[h][1];n=c[i][0]-c[h][0];q=c[i][1]-c[h][1];if(l*l+k*k>=n*n+q*q)a[b].index=-1;else{a[w].index=-1;u=a[b].angle;w=b;o=i}}else{u=a[b].angle;w=b;o=i}}g.push(h);for(i=b=0;b<2;++i)if(a[i].index!=-1){g.push(a[i].index);b++}for(h=g.length;i<d;++i)if(a[i].index!=-1){for(;!D(g[h-2],g[h-1],a[i].index,c);)--h;g[h++]=a[i].index}d=[];for(b=0;b<h;++b)d.push(c[g[b]]);
return d};d3.geom.polygon=function(c){c.area=function(){for(var i=0,d=c.length,a=c[d-1][0]*c[0][1],g=c[d-1][1]*c[0][0];++i<d;){a+=c[i-1][0]*c[i][1];g+=c[i-1][1]*c[i][0]}return(g-a)*0.5};c.clip=function(i){for(var d,a=-1,g=c.length,b,h,l=c[g-1],k,n,q;++a<g;){d=i.slice();i.length=0;k=c[a];n=d[(h=d.length)-1];for(b=-1;++b<h;){q=d[b];if(z(q,l,k)){z(n,l,k)||i.push(B(n,q,l,k));i.push(q)}else z(n,l,k)&&i.push(B(n,q,l,k));n=q}l=k}return i};return c};d3.geom.voronoi=function(c){var i=c.map(function(){return[]});
C(c,function(d){var a,g,b,h;if(d.a==1&&d.b>=0){a=d.ep.r;g=d.ep.l}else{a=d.ep.l;g=d.ep.r}if(d.a==1){b=a?a.y:-1E6;a=d.c-d.b*b;h=g?g.y:1E6;g=d.c-d.b*h}else{a=a?a.x:-1E6;b=d.c-d.a*a;g=g?g.x:1E6;h=d.c-d.a*g}a=[a,b];g=[g,h];i[d.region.l.index].push(a,g);i[d.region.r.index].push(a,g)});return i.map(function(d,a){var g=c[a][0],b=c[a][1];d.forEach(function(h){h.angle=Math.atan2(h[0]-g,h[1]-b)});return d.sort(function(h,l){return h.angle-l.angle}).filter(function(h,l){return!l||h.angle-d[l-1].angle>1.0E-10})})};
var A={l:"r",r:"l"};d3.geom.delaunay=function(c){var i=c.map(function(){return[]}),d=[];C(c,function(a){i[a.region.l.index].push(c[a.region.r.index])});i.forEach(function(a,g){var b=c[g],h=b[0],l=b[1];a.forEach(function(q){q.angle=Math.atan2(q[0]-h,q[1]-l)});a.sort(function(q,w){return q.angle-w.angle});for(var k=0,n=a.length-1;k<n;k++)d.push([b,a[k],a[k+1]])});return d}})();
