(function(){var s=null;d3.geom={};d3.geom.contour=function(c,i){var d;if(!(d=i))a:{for(var a=d=0;;){if(c(d,a)){d=[d,a];break a}if(d==0){d=a+1;a=0}else{d-=1;a+=1}}d=void 0}d=d;a=[];var g=d[0],b=d[1],h=0,l=0,k=NaN,n=NaN;l=0;do{l=0;if(c(g-1,b-1))l+=1;if(c(g,b-1))l+=2;if(c(g-1,b))l+=4;if(c(g,b))l+=8;if(l==6){h=n==-1?-1:1;l=0}else if(l==9){h=0;l=k==1?-1:1}else{h=A[l];l=B[l]}if(h!=k&&l!=n){a.push([g,b]);k=h;n=l}g+=h;b+=l}while(d[0]!=g||d[1]!=b);return a};
var A=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],B=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];
d3.geom.hull=function(c){if(c.length<3)return[];var i=c.length,d=i-1,a=[],g=[],b,h=0,l,k,n,p,x,o,v;for(b=1;b<i;++b)if(c[b][1]<c[h][1])h=b;else if(c[b][1]==c[h][1])h=c[b][0]<c[h][0]?b:h;for(b=0;b<i;++b)if(b!=h){k=c[b][1]-c[h][1];l=c[b][0]-c[h][0];a.push({a:Math.atan2(k,l),index:b})}a.sort(function(r,y){return r.a-y.a});v=a[0].a;o=a[0].index;x=0;for(b=1;b<d;++b){i=a[b].index;if(v==a[b].a){l=c[o][0]-c[h][0];k=c[o][1]-c[h][1];n=c[i][0]-c[h][0];p=c[i][1]-c[h][1];if(l*l+k*k>=n*n+p*p)a[b].index=-1;else{a[x].index=
-1;v=a[b].a;x=b;o=i}}else{v=a[b].a;x=b;o=i}}g.push(h);for(i=b=0;b<2;++i)if(a[i].index!=-1){g.push(a[i].index);b++}for(h=g.length;i<d;++i)if(a[i].index!=-1){for(;!C(g[h-2],g[h-1],a[i].index,c);)--h;g[h++]=a[i].index}d=[];for(b=0;b<h;++b)d.push(c[g[b]]);return d};function C(c,i,d,a){var g,b,h;c=a[c];g=c[0];b=c[1];c=a[i];i=c[0];h=c[1];c=a[d];return(c[1]-b)*(i-g)-(h-b)*(c[0]-g)>0}
d3.geom.polygon=function(c){c.area=function(){for(var i=0,d=c.length,a=c[d-1][0]*c[0][1],g=c[d-1][1]*c[0][0];++i<d;){a+=c[i-1][0]*c[i][1];g+=c[i-1][1]*c[i][0]}return(g-a)*0.5};c.clip=function(i){for(var d,a=-1,g=c.length,b,h,l=c[g-1],k,n,p;++a<g;){d=i.slice();i.length=0;k=c[a];n=d[(h=d.length)-1];for(b=-1;++b<h;){p=d[b];if(D(p,l,k)){D(n,l,k)||i.push(E(n,p,l,k));i.push(p)}else D(n,l,k)&&i.push(E(n,p,l,k));n=p}l=k}return i};return c};
function D(c,i,d){return(d[0]-i[0])*(c[1]-i[1])<(d[1]-i[1])*(c[0]-i[0])}function E(c,i,d,a){var g=c[0],b=d[0];c=c[1];var h=d[1];d=i[0]-g;var l=a[0]-b;i=i[1]-c;a=a[1]-h;b=(l*(c-h)-a*(g-b))/(a*d-l*i);return[g+b*d,c+b*i]}
d3.geom.voronoi=function(c){var i=c.map(function(){return[]});F(c,function(d){var a,g,b,h;if(d.i==1&&d.b>=0){a=d.o.r;g=d.o.l}else{a=d.o.l;g=d.o.r}if(d.i==1){b=a?a.y:-1E6;a=d.c-d.b*b;h=g?g.y:1E6;g=d.c-d.b*h}else{a=a?a.x:-1E6;b=d.c-d.i*a;g=g?g.x:1E6;h=d.c-d.i*g}a=[a,b];g=[g,h];i[d.region.l.index].push(a,g);i[d.region.r.index].push(a,g)});return i.map(function(d,a){var g=c[a][0],b=c[a][1];d.forEach(function(h){h.a=Math.atan2(h[0]-g,h[1]-b)});return d.sort(function(h,l){return h.a-l.a}).filter(function(h,
l){return!l||h.a-d[l-1].a>1.0E-10})})};var G={l:"r",r:"l"};
function F(c,i){var d={d:c.map(function(e,j){return{index:j,x:e[0],y:e[1]}}).sort(function(e,j){return e.y<j.y?-1:e.y>j.y?1:e.x<j.x?-1:e.x>j.x?1:0}),A:s},a={d:[],p:s,q:s,G:function(){a.p=a.t(s,"l");a.q=a.t(s,"l");a.p.r=a.q;a.q.l=a.p;a.d.unshift(a.p,a.q)},t:function(e,j){return{j:e,k:j,z:s,l:s,r:s}},m:function(e,j){j.l=e;j.r=e.r;e.r.l=j;e.r=j},H:function(e){var j=a.p;do j=j.r;while(j!=a.q&&g.J(j,e));return j=j.l},n:function(e){e.l.r=e.r;e.r.l=e.l;e.j=s},right:function(e){return e.r},left:function(e){return e.l},
I:function(e){return e.j==s?d.A:e.j.region[e.k]},D:function(e){return e.j==s?d.A:e.j.region[G[e.k]]}},g={C:function(e,j){var f={region:{l:e,r:j},o:{l:s,r:s}},m=j.x-e.x,q=j.y-e.y,u=m>0?m:-m,t=q>0?q:-q;f.c=e.x*m+e.y*q+(m*m+q*q)*0.5;if(u>t){f.i=1;f.b=q/m;f.c/=m}else{f.b=1;f.i=m/q;f.c/=q}return f},w:function(e,j){var f=e.j,m=j.j;if(!f||!m||f.region.r==m.region.r)return s;var q=f.i*m.b-f.b*m.i;if(Math.abs(q)<1.0E-10)return s;var u=(f.c*m.b-m.c*f.b)/q;q=(m.c*f.i-f.c*m.i)/q;var t=f.region.r,z=m.region.r;
if(t.y<z.y||t.y==z.y&&t.x<z.x){t=e;f=f}else{t=j;f=m}if((f=u>=f.region.r.x)&&t.k=="l"||!f&&t.k=="r")return s;return{x:u,y:q}},J:function(e,j){var f=e.j,m=f.region.r,q=j.x>m.x;if(q&&e.k=="l")return 1;if(!q&&e.k=="r")return 0;if(f.i==1){var u=j.y-m.y,t=j.x-m.x,z=0,w=0;if(!q&&f.b<0||q&&f.b>=0)w=z=u>=f.b*t;else{w=j.x+j.y*f.b>f.c;if(f.b<0)w=!w;w||(z=1)}if(!z){m=m.x-f.region.l.x;w=f.b*(t*t-u*u)<m*u*(1+2*t/m+f.b*f.b);if(f.b<0)w=!w}}else{t=f.c-f.i*j.x;f=j.y-t;u=j.x-m.x;m=t-m.y;w=f*f>u*u+m*m}return e.k=="l"?
w:!w},B:function(e,j,f){e.o[j]=f;e.o[G[j]]&&i(e)},v:function(e,j){var f=e.x-j.x,m=e.y-j.y;return Math.sqrt(f*f+m*m)}},b={d:[],m:function(e,j,f){e.z=j;e.u=j.y+f;f=0;for(var m=b.d,q=m.length;f<q;f++){var u=m[f];if(!(e.u>u.u||e.u==u.u&&j.x>u.z.x))break}m.splice(f,0,e)},n:function(e){for(var j=0,f=b.d,m=f.length;j<m&&f[j]!=e;++j);f.splice(j,1)},empty:function(){return b.d.length==0},K:function(e){for(var j=0,f=b.d,m=f.length;j<m;++j)if(f[j]==e)return f[j+1];return s},min:function(){var e=b.d[0];return{x:e.z.x,
y:e.u}},F:function(){return b.d.shift()}};a.G();d.A=d.d.shift();for(var h=d.d.shift(),l,k,n,p,x,o,v,r,y;;){b.empty()||(l=b.min());if(h&&(b.empty()||h.y<l.y||h.y==l.y&&h.x<l.x)){k=a.H(h);n=a.right(k);v=a.D(k);y=g.C(v,h);o=a.t(y,"l");a.m(k,o);if(r=g.w(k,o)){b.n(k);b.m(k,r,g.v(r,h))}k=o;o=a.t(y,"r");a.m(k,o);(r=g.w(o,n))&&b.m(o,r,g.v(r,h));h=d.d.shift()}else if(b.empty())break;else{k=b.F();p=a.left(k);n=a.right(k);x=a.right(n);v=a.I(k);o=a.D(n);r=k.z;g.B(k.j,k.k,r);g.B(n.j,n.k,r);a.n(k);b.n(n);a.n(n);
k="l";if(v.y>o.y){k=v;v=o;o=k;k="r"}y=g.C(v,o);o=a.t(y,k);a.m(p,o);g.B(y,G[k],r);if(r=g.w(p,o)){b.n(p);b.m(p,r,g.v(r,v))}(r=g.w(o,x))&&b.m(o,r,g.v(r,v))}}for(k=a.right(a.p);k!=a.q;k=a.right(k))i(k.j)}
d3.geom.delaunay=function(c){var i=c.map(function(){return[]}),d=[];F(c,function(a){i[a.region.l.index].push(c[a.region.r.index])});i.forEach(function(a,g){var b=c[g],h=b[0],l=b[1];a.forEach(function(p){p.a=Math.atan2(p[0]-h,p[1]-l)});a.sort(function(p,x){return p.a-x.a});for(var k=0,n=a.length-1;k<n;k++)d.push([b,a[k],a[k+1]])});return d};})()
