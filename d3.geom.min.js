(function(){var s=null;d3.geom={};d3.geom.contour=function(c,i){var d;if(!(d=i))a:{for(var a=d=0;;){if(c(d,a)){d=[d,a];break a}if(d==0){d=a+1;a=0}else{d-=1;a+=1}}d=void 0}d=d;a=[];var h=d[0],b=d[1],f,m=0;f=0;var k=NaN,n=NaN;do{f=c(h-1,b-1)+2*c(h,b-1)+4*c(h-1,b)+8*c(h,b);if(f==6){m=n==-1?-1:1;f=0}else if(f==9){m=0;f=k==1?-1:1}else{m=A[f];f=B[f]}if(m!=k&&f!=n){a.push([h,b]);k=m;n=f}h+=m;b+=f}while(d[0]!=h||d[1]!=b);return a};var A=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],B=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];
d3.geom.hull=function(c){if(c.length<3)return[];var i=c.length,d=i-1,a=[],h=[],b,f=0,m,k,n,p,x,o,v;for(b=1;b<i;++b)if(c[b][1]<c[f][1])f=b;else if(c[b][1]==c[f][1])f=c[b][0]<c[f][0]?b:f;for(b=0;b<i;++b)if(b!=f){k=c[b][1]-c[f][1];m=c[b][0]-c[f][0];a.push({a:Math.atan2(k,m),index:b})}a.sort(function(r,y){return r.a-y.a});v=a[0].a;o=a[0].index;x=0;for(b=1;b<d;++b){i=a[b].index;if(v==a[b].a){m=c[o][0]-c[f][0];k=c[o][1]-c[f][1];n=c[i][0]-c[f][0];p=c[i][1]-c[f][1];if(m*m+k*k>=n*n+p*p)a[b].index=-1;else{a[x].index=
-1;v=a[b].a;x=b;o=i}}else{v=a[b].a;x=b;o=i}}h.push(f);for(i=b=0;b<2;++i)if(a[i].index!=-1){h.push(a[i].index);b++}for(f=h.length;i<d;++i)if(a[i].index!=-1){for(;!C(h[f-2],h[f-1],a[i].index,c);)--f;h[f++]=a[i].index}d=[];for(b=0;b<f;++b)d.push(c[h[b]]);return d};function C(c,i,d,a){var h,b,f;c=a[c];h=c[0];b=c[1];c=a[i];i=c[0];f=c[1];c=a[d];return(c[1]-b)*(i-h)-(f-b)*(c[0]-h)>0}
d3.geom.polygon=function(c){c.area=function(){for(var i=0,d=c.length,a=c[d-1][0]*c[0][1],h=c[d-1][1]*c[0][0];++i<d;){a+=c[i-1][0]*c[i][1];h+=c[i-1][1]*c[i][0]}return(h-a)*0.5};c.clip=function(i){for(var d,a=-1,h=c.length,b,f,m=c[h-1],k,n,p;++a<h;){d=i.slice();i.length=0;k=c[a];n=d[(f=d.length)-1];for(b=-1;++b<f;){p=d[b];if(D(p,m,k)){D(n,m,k)||i.push(E(n,p,m,k));i.push(p)}else D(n,m,k)&&i.push(E(n,p,m,k));n=p}m=k}return i};return c};
function D(c,i,d){return(d[0]-i[0])*(c[1]-i[1])<(d[1]-i[1])*(c[0]-i[0])}function E(c,i,d,a){var h=c[0],b=d[0];c=c[1];var f=d[1];d=i[0]-h;var m=a[0]-b;i=i[1]-c;a=a[1]-f;b=(m*(c-f)-a*(h-b))/(a*d-m*i);return[h+b*d,c+b*i]}
d3.geom.voronoi=function(c){var i=c.map(function(){return[]});F(c,function(d){var a,h,b,f;if(d.i==1&&d.b>=0){a=d.o.r;h=d.o.l}else{a=d.o.l;h=d.o.r}if(d.i==1){b=a?a.y:-1E6;a=d.c-d.b*b;f=h?h.y:1E6;h=d.c-d.b*f}else{a=a?a.x:-1E6;b=d.c-d.i*a;h=h?h.x:1E6;f=d.c-d.i*h}a=[a,b];h=[h,f];i[d.region.l.index].push(a,h);i[d.region.r.index].push(a,h)});return i.map(function(d,a){var h=c[a][0],b=c[a][1];d.forEach(function(f){f.a=Math.atan2(f[0]-h,f[1]-b)});return d.sort(function(f,m){return f.a-m.a}).filter(function(f,
m){return!m||f.a-d[m-1].a>1.0E-10})})};var G={l:"r",r:"l"};
function F(c,i){var d={d:c.map(function(e,j){return{index:j,x:e[0],y:e[1]}}).sort(function(e,j){return e.y<j.y?-1:e.y>j.y?1:e.x<j.x?-1:e.x>j.x?1:0}),A:s},a={d:[],p:s,q:s,G:function(){a.p=a.t(s,"l");a.q=a.t(s,"l");a.p.r=a.q;a.q.l=a.p;a.d.unshift(a.p,a.q)},t:function(e,j){return{j:e,k:j,z:s,l:s,r:s}},m:function(e,j){j.l=e;j.r=e.r;e.r.l=j;e.r=j},H:function(e){var j=a.p;do j=j.r;while(j!=a.q&&h.J(j,e));return j=j.l},n:function(e){e.l.r=e.r;e.r.l=e.l;e.j=s},right:function(e){return e.r},left:function(e){return e.l},
I:function(e){return e.j==s?d.A:e.j.region[e.k]},D:function(e){return e.j==s?d.A:e.j.region[G[e.k]]}},h={C:function(e,j){var g={region:{l:e,r:j},o:{l:s,r:s}},l=j.x-e.x,q=j.y-e.y,u=l>0?l:-l,t=q>0?q:-q;g.c=e.x*l+e.y*q+(l*l+q*q)*0.5;if(u>t){g.i=1;g.b=q/l;g.c/=l}else{g.b=1;g.i=l/q;g.c/=q}return g},w:function(e,j){var g=e.j,l=j.j;if(!g||!l||g.region.r==l.region.r)return s;var q=g.i*l.b-g.b*l.i;if(Math.abs(q)<1.0E-10)return s;var u=(g.c*l.b-l.c*g.b)/q;q=(l.c*g.i-g.c*l.i)/q;var t=g.region.r,z=l.region.r;
if(t.y<z.y||t.y==z.y&&t.x<z.x){t=e;g=g}else{t=j;g=l}if((g=u>=g.region.r.x)&&t.k=="l"||!g&&t.k=="r")return s;return{x:u,y:q}},J:function(e,j){var g=e.j,l=g.region.r,q=j.x>l.x;if(q&&e.k=="l")return 1;if(!q&&e.k=="r")return 0;if(g.i==1){var u=j.y-l.y,t=j.x-l.x,z=0,w=0;if(!q&&g.b<0||q&&g.b>=0)w=z=u>=g.b*t;else{w=j.x+j.y*g.b>g.c;if(g.b<0)w=!w;w||(z=1)}if(!z){l=l.x-g.region.l.x;w=g.b*(t*t-u*u)<l*u*(1+2*t/l+g.b*g.b);if(g.b<0)w=!w}}else{t=g.c-g.i*j.x;g=j.y-t;u=j.x-l.x;l=t-l.y;w=g*g>u*u+l*l}return e.k=="l"?
w:!w},B:function(e,j,g){e.o[j]=g;e.o[G[j]]&&i(e)},v:function(e,j){var g=e.x-j.x,l=e.y-j.y;return Math.sqrt(g*g+l*l)}},b={d:[],m:function(e,j,g){e.z=j;e.u=j.y+g;g=0;for(var l=b.d,q=l.length;g<q;g++){var u=l[g];if(!(e.u>u.u||e.u==u.u&&j.x>u.z.x))break}l.splice(g,0,e)},n:function(e){for(var j=0,g=b.d,l=g.length;j<l&&g[j]!=e;++j);g.splice(j,1)},empty:function(){return b.d.length==0},K:function(e){for(var j=0,g=b.d,l=g.length;j<l;++j)if(g[j]==e)return g[j+1];return s},min:function(){var e=b.d[0];return{x:e.z.x,
y:e.u}},F:function(){return b.d.shift()}};a.G();d.A=d.d.shift();for(var f=d.d.shift(),m,k,n,p,x,o,v,r,y;;){b.empty()||(m=b.min());if(f&&(b.empty()||f.y<m.y||f.y==m.y&&f.x<m.x)){k=a.H(f);n=a.right(k);v=a.D(k);y=h.C(v,f);o=a.t(y,"l");a.m(k,o);if(r=h.w(k,o)){b.n(k);b.m(k,r,h.v(r,f))}k=o;o=a.t(y,"r");a.m(k,o);(r=h.w(o,n))&&b.m(o,r,h.v(r,f));f=d.d.shift()}else if(b.empty())break;else{k=b.F();p=a.left(k);n=a.right(k);x=a.right(n);v=a.I(k);o=a.D(n);r=k.z;h.B(k.j,k.k,r);h.B(n.j,n.k,r);a.n(k);b.n(n);a.n(n);
k="l";if(v.y>o.y){k=v;v=o;o=k;k="r"}y=h.C(v,o);o=a.t(y,k);a.m(p,o);h.B(y,G[k],r);if(r=h.w(p,o)){b.n(p);b.m(p,r,h.v(r,v))}(r=h.w(o,x))&&b.m(o,r,h.v(r,v))}}for(k=a.right(a.p);k!=a.q;k=a.right(k))i(k.j)}
d3.geom.delaunay=function(c){var i=c.map(function(){return[]}),d=[];F(c,function(a){i[a.region.l.index].push(c[a.region.r.index])});i.forEach(function(a,h){var b=c[h],f=b[0],m=b[1];a.forEach(function(p){p.a=Math.atan2(p[0]-f,p[1]-m)});a.sort(function(p,x){return p.a-x.a});for(var k=0,n=a.length-1;k<n;k++)d.push([b,a[k],a[k+1]])});return d};})()
