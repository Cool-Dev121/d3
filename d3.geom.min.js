(function(){var r=null;d3.geom={};d3.geom.polygon=function(j){j.area=function(){for(var k=0,e=j.length,a=j[e-1][0]*j[0][1],g=j[e-1][1]*j[0][0];++k<e;){a+=j[k-1][0]*j[k][1];g+=j[k-1][1]*j[k][0]}return(g-a)*0.5};j.clip=function(k){for(var e,a=-1,g=j.length,i,l,n=j[g-1],h,o,p;++a<g;){e=k.slice();k.length=0;h=j[a];o=e[(l=e.length)-1];for(i=-1;++i<l;){p=e[i];if(A(p,n,h)){A(o,n,h)||k.push(B(o,p,n,h));k.push(p)}else A(o,n,h)&&k.push(B(o,p,n,h));o=p}n=h}return k};return j};
function A(j,k,e){return(e[0]-k[0])*(j[1]-k[1])<(e[1]-k[1])*(j[0]-k[0])}function B(j,k,e,a){var g=j[0],i=e[0];j=j[1];var l=e[1];e=k[0]-g;var n=a[0]-i;k=k[1]-j;a=a[1]-l;i=(n*(j-l)-a*(g-i))/(a*e-n*k);return[g+i*e,j+i*k]}
d3.geom.voronoi=function(j){var k=j.map(function(){return[]});C(j,function(e){var a,g,i,l;if(e.d==1&&e.a>=0){a=e.m.r;g=e.m.l}else{a=e.m.l;g=e.m.r}if(e.d==1){i=a?a.y:-1E6;a=e.b-e.a*i;l=g?g.y:1E6;g=e.b-e.a*l}else{a=a?a.x:-1E6;i=e.b-e.d*a;g=g?g.x:1E6;l=e.b-e.d*g}a=[a,i];g=[g,l];k[e.region.l.index].push(a,g);k[e.region.r.index].push(a,g)});return k.map(function(e,a){var g=j[a][0],i=j[a][1];e.forEach(function(l){l.j=Math.atan2(l[0]-g,l[1]-i)});return e.sort(function(l,n){return l.j-n.j}).filter(function(l,
n){return!n||l.j-e[n-1].j>1.0E-10})})};var D={l:"r",r:"l"};
function C(j,k){var e={c:j.map(function(b,d){return{index:d,x:b[0],y:b[1]}}).sort(function(b,d){return b.y<d.y?-1:b.y>d.y?1:b.x<d.x?-1:b.x>d.x?1:0}),v:r},a={c:[],n:r,o:r,C:function(){a.n=a.p(r,"l");a.o=a.p(r,"l");a.n.r=a.o;a.o.l=a.n;a.c.unshift(a.n,a.o)},p:function(b,d){return{g:b,h:d,u:r,l:r,r:r}},i:function(b,d){d.l=b;d.r=b.r;b.r.l=d;b.r=d},D:function(b){var d=a.n;do d=d.r;while(d!=a.o&&g.G(d,b));return d=d.l},k:function(b){b.l.r=b.r;b.r.l=b.l;b.g=r},right:function(b){return b.r},left:function(b){return b.l},
F:function(b){return b.g==r?e.v:b.g.region[b.h]},A:function(b){return b.g==r?e.v:b.g.region[D[b.h]]}},g={z:function(b,d){var c={region:{l:b,r:d},m:{l:r,r:r}},f=d.x-b.x,m=d.y-b.y,t=f>0?f:-f,s=m>0?m:-m;c.b=b.x*f+b.y*m+(f*f+m*m)*0.5;if(t>s){c.d=1;c.a=m/f;c.b/=f}else{c.a=1;c.d=f/m;c.b/=m}return c},t:function(b,d){var c=b.g,f=d.g;if(!c||!f||c.region.r==f.region.r)return r;var m=c.d*f.a-c.a*f.d;if(Math.abs(m)<1.0E-10)return r;var t=(c.b*f.a-f.b*c.a)/m;m=(f.b*c.d-c.b*f.d)/m;var s=c.region.r,x=f.region.r;
if(s.y<x.y||s.y==x.y&&s.x<x.x){s=b;c=c}else{s=d;c=f}if((c=t>=c.region.r.x)&&s.h=="l"||!c&&s.h=="r")return r;return{x:t,y:m}},G:function(b,d){var c=b.g,f=c.region.r,m=d.x>f.x;if(m&&b.h=="l")return 1;if(!m&&b.h=="r")return 0;if(c.d==1){var t=d.y-f.y,s=d.x-f.x,x=0,v=0;if(!m&&c.a<0||m&&c.a>=0)v=x=t>=c.a*s;else{v=d.x+d.y*c.a>c.b;if(c.a<0)v=!v;v||(x=1)}if(!x){f=f.x-c.region.l.x;v=c.a*(s*s-t*t)<f*t*(1+2*s/f+c.a*c.a);if(c.a<0)v=!v}}else{s=c.b-c.d*d.x;c=d.y-s;t=d.x-f.x;f=s-f.y;v=c*c>t*t+f*f}return b.h=="l"?
v:!v},w:function(b,d,c){b.m[d]=c;b.m[D[d]]&&k(b)},s:function(b,d){var c=b.x-d.x,f=b.y-d.y;return Math.sqrt(c*c+f*f)}},i={c:[],i:function(b,d,c){b.u=d;b.q=d.y+c;c=0;for(var f=i.c,m=f.length;c<m;c++){var t=f[c];if(!(b.q>t.q||b.q==t.q&&d.x>t.u.x))break}f.splice(c,0,b)},k:function(b){for(var d=0,c=i.c,f=c.length;d<f&&c[d]!=b;++d);c.splice(d,1)},empty:function(){return i.c.length==0},H:function(b){for(var d=0,c=i.c,f=c.length;d<f;++d)if(c[d]==b)return c[d+1];return r},min:function(){var b=i.c[0];return{x:b.u.x,
y:b.q}},B:function(){return i.c.shift()}};a.C();e.v=e.c.shift();for(var l=e.c.shift(),n,h,o,p,z,q,w,u,y;;){i.empty()||(n=i.min());if(l&&(i.empty()||l.y<n.y||l.y==n.y&&l.x<n.x)){h=a.D(l);o=a.right(h);w=a.A(h);y=g.z(w,l);q=a.p(y,"l");a.i(h,q);if(u=g.t(h,q)){i.k(h);i.i(h,u,g.s(u,l))}h=q;q=a.p(y,"r");a.i(h,q);(u=g.t(q,o))&&i.i(q,u,g.s(u,l));l=e.c.shift()}else if(i.empty())break;else{h=i.B();p=a.left(h);o=a.right(h);z=a.right(o);w=a.F(h);q=a.A(o);u=h.u;g.w(h.g,h.h,u);g.w(o.g,o.h,u);a.k(h);i.k(o);a.k(o);
h="l";if(w.y>q.y){h=w;w=q;q=h;h="r"}y=g.z(w,q);q=a.p(y,h);a.i(p,q);g.w(y,D[h],u);if(u=g.t(p,q)){i.k(p);i.i(p,u,g.s(u,w))}(u=g.t(q,z))&&i.i(q,u,g.s(u,w))}}for(h=a.right(a.n);h!=a.o;h=a.right(h))k(h.g)}
d3.geom.delaunay=function(j){var k=j.map(function(){return[]}),e=[];C(j,function(a){k[a.region.l.index].push(j[a.region.r.index])});k.forEach(function(a,g){var i=j[g],l=i[0],n=i[1];a.forEach(function(p){p.j=Math.atan2(p[0]-l,p[1]-n)});a.sort(function(p,z){return p.j-z.j});for(var h=0,o=a.length-1;h<o;h++)e.push([i,a[h],a[h+1]])});return e};})()
