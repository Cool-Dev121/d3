(function(){var v=null;d3.geom={};
d3.geom.hull=function(h){function n(u,b,f,c,e){var l,o,s,x;o=e[f][1]-e[b][1];l=e[f][0]-e[b][0];s=l*l+o*o;o=e[c][1]-e[f][1];l=e[c][0]-e[f][0];x=l*l+o*o;o=e[c][1]-e[u][1];l=e[c][0]-e[u][0];c=l*l+o*o;o=e[b][1]-e[u][1];l=e[b][0]-e[u][0];b=l*l+o*o;o=e[f][1]-e[u][1];l=e[f][0]-e[u][0];u=l*l+o*o;return Math.PI-Math.acos((x+u-c)/(2*Math.sqrt(x*u)))-Math.acos((u+s-b)/(2*Math.sqrt(u*s)))<=0}if(h.length<3)return[];var d=h.length,a=d-1,i=[],k=[],g,m=0,j,p,r,z,q,w,t;for(g=1;g<d;++g)if(h[g][1]<h[m][1])m=g;else if(h[g][1]==
h[m][1])m=h[g][0]<h[m][0]?g:m;for(g=0;g<d;++g)if(g!=m){p=h[g][1]-h[m][1];j=h[g][0]-h[m][0];i.push({a:Math.atan2(p,j),index:g})}i.sort(function(u,b){return u.a-b.a});t=i[0].a;w=i[0].index;q=0;for(g=1;g<a;++g){d=i[g].index;if(t==i[g].a){j=h[w][0]-h[m][0];p=h[w][1]-h[m][1];r=h[d][0]-h[m][0];z=h[d][1]-h[m][1];if(j*j+p*p>=r*r+z*z)i[g].index=-1;else{i[q].index=-1;t=i[g].a;q=g;w=d}}else{t=i[g].a;q=g;w=d}}k.push(m);for(d=g=0;g<2;++d)if(i[d].index!=-1){k.push(i[d].index);g++}for(j=k.length;d<a;++d)if(i[d].index!=
-1){for(;n(m,k[j-2],k[j-1],i[d].index,h);)--j;k[j++]=i[d].index}a=[];for(g=0;g<j;++g)a.push(h[k[g]]);return a};
d3.geom.polygon=function(h){h.area=function(){for(var n=0,d=h.length,a=h[d-1][0]*h[0][1],i=h[d-1][1]*h[0][0];++n<d;){a+=h[n-1][0]*h[n][1];i+=h[n-1][1]*h[n][0]}return(i-a)*0.5};h.clip=function(n){for(var d,a=-1,i=h.length,k,g,m=h[i-1],j,p,r;++a<i;){d=n.slice();n.length=0;j=h[a];p=d[(g=d.length)-1];for(k=-1;++k<g;){r=d[k];if(A(r,m,j)){A(p,m,j)||n.push(B(p,r,m,j));n.push(r)}else A(p,m,j)&&n.push(B(p,r,m,j));p=r}m=j}return n};return h};
function A(h,n,d){return(d[0]-n[0])*(h[1]-n[1])<(d[1]-n[1])*(h[0]-n[0])}function B(h,n,d,a){var i=h[0],k=d[0];h=h[1];var g=d[1];d=n[0]-i;var m=a[0]-k;n=n[1]-h;a=a[1]-g;k=(m*(h-g)-a*(i-k))/(a*d-m*n);return[i+k*d,h+k*n]}
d3.geom.voronoi=function(h){var n=h.map(function(){return[]});C(h,function(d){var a,i,k,g;if(d.i==1&&d.b>=0){a=d.o.r;i=d.o.l}else{a=d.o.l;i=d.o.r}if(d.i==1){k=a?a.y:-1E6;a=d.c-d.b*k;g=i?i.y:1E6;i=d.c-d.b*g}else{a=a?a.x:-1E6;k=d.c-d.i*a;i=i?i.x:1E6;g=d.c-d.i*i}a=[a,k];i=[i,g];n[d.region.l.index].push(a,i);n[d.region.r.index].push(a,i)});return n.map(function(d,a){var i=h[a][0],k=h[a][1];d.forEach(function(g){g.a=Math.atan2(g[0]-i,g[1]-k)});return d.sort(function(g,m){return g.a-m.a}).filter(function(g,
m){return!m||g.a-d[m-1].a>1.0E-10})})};var D={l:"r",r:"l"};
function C(h,n){var d={d:h.map(function(b,f){return{index:f,x:b[0],y:b[1]}}).sort(function(b,f){return b.y<f.y?-1:b.y>f.y?1:b.x<f.x?-1:b.x>f.x?1:0}),A:v},a={d:[],p:v,q:v,G:function(){a.p=a.t(v,"l");a.q=a.t(v,"l");a.p.r=a.q;a.q.l=a.p;a.d.unshift(a.p,a.q)},t:function(b,f){return{j:b,k:f,z:v,l:v,r:v}},m:function(b,f){f.l=b;f.r=b.r;b.r.l=f;b.r=f},H:function(b){var f=a.p;do f=f.r;while(f!=a.q&&i.J(f,b));return f=f.l},n:function(b){b.l.r=b.r;b.r.l=b.l;b.j=v},right:function(b){return b.r},left:function(b){return b.l},
I:function(b){return b.j==v?d.A:b.j.region[b.k]},D:function(b){return b.j==v?d.A:b.j.region[D[b.k]]}},i={C:function(b,f){var c={region:{l:b,r:f},o:{l:v,r:v}},e=f.x-b.x,l=f.y-b.y,o=e>0?e:-e,s=l>0?l:-l;c.c=b.x*e+b.y*l+(e*e+l*l)*0.5;if(o>s){c.i=1;c.b=l/e;c.c/=e}else{c.b=1;c.i=e/l;c.c/=l}return c},w:function(b,f){var c=b.j,e=f.j;if(!c||!e||c.region.r==e.region.r)return v;var l=c.i*e.b-c.b*e.i;if(Math.abs(l)<1.0E-10)return v;var o=(c.c*e.b-e.c*c.b)/l;l=(e.c*c.i-c.c*e.i)/l;var s=c.region.r,x=e.region.r;
if(s.y<x.y||s.y==x.y&&s.x<x.x){s=b;c=c}else{s=f;c=e}if((c=o>=c.region.r.x)&&s.k=="l"||!c&&s.k=="r")return v;return{x:o,y:l}},J:function(b,f){var c=b.j,e=c.region.r,l=f.x>e.x;if(l&&b.k=="l")return 1;if(!l&&b.k=="r")return 0;if(c.i==1){var o=f.y-e.y,s=f.x-e.x,x=0,y=0;if(!l&&c.b<0||l&&c.b>=0)y=x=o>=c.b*s;else{y=f.x+f.y*c.b>c.c;if(c.b<0)y=!y;y||(x=1)}if(!x){e=e.x-c.region.l.x;y=c.b*(s*s-o*o)<e*o*(1+2*s/e+c.b*c.b);if(c.b<0)y=!y}}else{s=c.c-c.i*f.x;c=f.y-s;o=f.x-e.x;e=s-e.y;y=c*c>o*o+e*e}return b.k=="l"?
y:!y},B:function(b,f,c){b.o[f]=c;b.o[D[f]]&&n(b)},v:function(b,f){var c=b.x-f.x,e=b.y-f.y;return Math.sqrt(c*c+e*e)}},k={d:[],m:function(b,f,c){b.z=f;b.u=f.y+c;c=0;for(var e=k.d,l=e.length;c<l;c++){var o=e[c];if(!(b.u>o.u||b.u==o.u&&f.x>o.z.x))break}e.splice(c,0,b)},n:function(b){for(var f=0,c=k.d,e=c.length;f<e&&c[f]!=b;++f);c.splice(f,1)},empty:function(){return k.d.length==0},K:function(b){for(var f=0,c=k.d,e=c.length;f<e;++f)if(c[f]==b)return c[f+1];return v},min:function(){var b=k.d[0];return{x:b.z.x,
y:b.u}},F:function(){return k.d.shift()}};a.G();d.A=d.d.shift();for(var g=d.d.shift(),m,j,p,r,z,q,w,t,u;;){k.empty()||(m=k.min());if(g&&(k.empty()||g.y<m.y||g.y==m.y&&g.x<m.x)){j=a.H(g);p=a.right(j);w=a.D(j);u=i.C(w,g);q=a.t(u,"l");a.m(j,q);if(t=i.w(j,q)){k.n(j);k.m(j,t,i.v(t,g))}j=q;q=a.t(u,"r");a.m(j,q);(t=i.w(q,p))&&k.m(q,t,i.v(t,g));g=d.d.shift()}else if(k.empty())break;else{j=k.F();r=a.left(j);p=a.right(j);z=a.right(p);w=a.I(j);q=a.D(p);t=j.z;i.B(j.j,j.k,t);i.B(p.j,p.k,t);a.n(j);k.n(p);a.n(p);
j="l";if(w.y>q.y){j=w;w=q;q=j;j="r"}u=i.C(w,q);q=a.t(u,j);a.m(r,q);i.B(u,D[j],t);if(t=i.w(r,q)){k.n(r);k.m(r,t,i.v(t,w))}(t=i.w(q,z))&&k.m(q,t,i.v(t,w))}}for(j=a.right(a.p);j!=a.q;j=a.right(j))n(j.j)}
d3.geom.delaunay=function(h){var n=h.map(function(){return[]}),d=[];C(h,function(a){n[a.region.l.index].push(h[a.region.r.index])});n.forEach(function(a,i){var k=h[i],g=k[0],m=k[1];a.forEach(function(r){r.a=Math.atan2(r[0]-g,r[1]-m)});a.sort(function(r,z){return r.a-z.a});for(var j=0,p=a.length-1;j<p;j++)d.push([k,a[j],a[j+1]])});return d};})()
