(function(){var r=null;d3.geom={};d3.geom.polygon=function(j){j.area=function(){for(var k=0,e=j.length,a=j[e-1][0]*j[0][1],g=j[e-1][1]*j[0][0];++k<e;){a+=j[k-1][0]*j[k][1];g+=j[k-1][1]*j[k][0]}return(g-a)*0.5};j.clip=function(k){for(var e,a=-1,g=j.length,i,l,n=j[g-1],h,o,p;++a<g;){e=k.slice();k.length=0;h=j[a];o=e[(l=e.length)-1];for(i=-1;++i<l;){p=e[i];if(A(p,n,h)){A(o,n,h)||k.push(B(o,p,n,h));k.push(p)}else A(o,n,h)&&k.push(B(o,p,n,h));o=p}n=h}return k};return j};
function A(j,k,e){return(e[0]-k[0])*(j[1]-k[1])<(e[1]-k[1])*(j[0]-k[0])}function B(j,k,e,a){var g=j[0],i=e[0];j=j[1];var l=e[1];e=k[0]-g;var n=a[0]-i;k=k[1]-j;a=a[1]-l;i=(n*(j-l)-a*(g-i))/(a*e-n*k);return[g+i*e,j+i*k]}
d3.geom.voronoi=function(j){var k=j.map(function(){return[]});C(j,function(e){var a,g,i,l;if(e.d==1&&e.b>=0){a=e.o.r;g=e.o.l}else{a=e.o.l;g=e.o.r}if(e.d==1){i=a?a.y:-1E6;a=e.a-e.b*i;l=g?g.y:1E6;g=e.a-e.b*l}else{a=a?a.x:-1E6;i=e.a-e.d*a;g=g?g.x:1E6;l=e.a-e.d*g}a=[a,i];g=[g,l];k[e.region.l.index].push(a,g);k[e.region.r.index].push(a,g)});return k.map(function(e,a){var g=j[a][0],i=j[a][1];e.forEach(function(l){l.m=Math.atan2(l[0]-g,l[1]-i)});return e.sort(function(l,n){return l.m-n.m}).filter(function(l,
n){return!n||l.m-e[n-1].m>1.0E-10})})};var D={l:"r",r:"l"};
function C(j,k){var e={c:j.map(function(b,d){return{index:d,x:b[0],y:b[1]}}).sort(function(b,d){return b.y<d.y?-1:b.y>d.y?1:b.x<d.x?-1:b.x>d.x?1:0}),A:r},a={c:[],p:r,q:r,G:function(){a.p=a.t(r,"l");a.q=a.t(r,"l");a.p.r=a.q;a.q.l=a.p;a.c.unshift(a.p,a.q)},t:function(b,d){return{i:b,j:d,z:r,l:r,r:r}},k:function(b,d){d.l=b;d.r=b.r;b.r.l=d;b.r=d},H:function(b){var d=a.p;do d=d.r;while(d!=a.q&&g.J(d,b));return d=d.l},n:function(b){b.l.r=b.r;b.r.l=b.l;b.i=r},right:function(b){return b.r},left:function(b){return b.l},
I:function(b){return b.i==r?e.A:b.i.region[b.j]},D:function(b){return b.i==r?e.A:b.i.region[D[b.j]]}},g={C:function(b,d){var c={region:{l:b,r:d},o:{l:r,r:r}},f=d.x-b.x,m=d.y-b.y,t=f>0?f:-f,s=m>0?m:-m;c.a=b.x*f+b.y*m+(f*f+m*m)*0.5;if(t>s){c.d=1;c.b=m/f;c.a/=f}else{c.b=1;c.d=f/m;c.a/=m}return c},w:function(b,d){var c=b.i,f=d.i;if(!c||!f||c.region.r==f.region.r)return r;var m=c.d*f.b-c.b*f.d;if(Math.abs(m)<1.0E-10)return r;var t=(c.a*f.b-f.a*c.b)/m;m=(f.a*c.d-c.a*f.d)/m;var s=c.region.r,x=f.region.r;
if(s.y<x.y||s.y==x.y&&s.x<x.x){s=b;c=c}else{s=d;c=f}if((c=t>=c.region.r.x)&&s.j=="l"||!c&&s.j=="r")return r;return{x:t,y:m}},J:function(b,d){var c=b.i,f=c.region.r,m=d.x>f.x;if(m&&b.j=="l")return 1;if(!m&&b.j=="r")return 0;if(c.d==1){var t=d.y-f.y,s=d.x-f.x,x=0,v=0;if(!m&&c.b<0||m&&c.b>=0)v=x=t>=c.b*s;else{v=d.x+d.y*c.b>c.a;if(c.b<0)v=!v;v||(x=1)}if(!x){f=f.x-c.region.l.x;v=c.b*(s*s-t*t)<f*t*(1+2*s/f+c.b*c.b);if(c.b<0)v=!v}}else{s=c.a-c.d*d.x;c=d.y-s;t=d.x-f.x;f=s-f.y;v=c*c>t*t+f*f}return b.j=="l"?
v:!v},B:function(b,d,c){b.o[d]=c;b.o[D[d]]&&k(b)},v:function(b,d){var c=b.x-d.x,f=b.y-d.y;return Math.sqrt(c*c+f*f)}},i={c:[],k:function(b,d,c){b.z=d;b.u=d.y+c;c=0;for(var f=i.c,m=f.length;c<m;c++){var t=f[c];if(!(b.u>t.u||b.u==t.u&&d.x>t.z.x))break}f.splice(c,0,b)},n:function(b){for(var d=0,c=i.c,f=c.length;d<f&&c[d]!=b;++d);c.splice(d,1)},empty:function(){return i.c.length==0},K:function(b){for(var d=0,c=i.c,f=c.length;d<f;++d)if(c[d]==b)return c[d+1];return r},min:function(){var b=i.c[0];return{x:b.z.x,
y:b.u}},F:function(){return i.c.shift()}};a.G();e.A=e.c.shift();for(var l=e.c.shift(),n,h,o,p,z,q,w,u,y;;){i.empty()||(n=i.min());if(l&&(i.empty()||l.y<n.y||l.y==n.y&&l.x<n.x)){h=a.H(l);o=a.right(h);w=a.D(h);y=g.C(w,l);q=a.t(y,"l");a.k(h,q);if(u=g.w(h,q)){i.n(h);i.k(h,u,g.v(u,l))}h=q;q=a.t(y,"r");a.k(h,q);(u=g.w(q,o))&&i.k(q,u,g.v(u,l));l=e.c.shift()}else if(i.empty())break;else{h=i.F();p=a.left(h);o=a.right(h);z=a.right(o);w=a.I(h);q=a.D(o);u=h.z;g.B(h.i,h.j,u);g.B(o.i,o.j,u);a.n(h);i.n(o);a.n(o);
h="l";if(w.y>q.y){h=w;w=q;q=h;h="r"}y=g.C(w,q);q=a.t(y,h);a.k(p,q);g.B(y,D[h],u);if(u=g.w(p,q)){i.n(p);i.k(p,u,g.v(u,w))}(u=g.w(q,z))&&i.k(q,u,g.v(u,w))}}for(h=a.right(a.p);h!=a.q;h=a.right(h))k(h.i)}
d3.geom.delaunay=function(j){var k=j.map(function(){return[]}),e=[];C(j,function(a){k[a.region.l.index].push(j[a.region.r.index])});k.forEach(function(a,g){var i=j[g],l=i[0],n=i[1];a.forEach(function(p){p.m=Math.atan2(p[0]-l,p[1]-n)});a.sort(function(p,z){return p.m-z.m});for(var h=0,o=a.length-1;h<o;h++)e.push([i,a[h],a[h+1]])});return e};})()
