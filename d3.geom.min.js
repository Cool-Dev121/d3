(function(){var s=null;d3.geom={};
d3.geom.hull=function(c){if(c.length<3)return[];var i=c.length,g=i-1,a=[],d=[],b,h=0,m,k,o,p,x,n,v;for(b=1;b<i;++b)if(c[b][1]<c[h][1])h=b;else if(c[b][1]==c[h][1])h=c[b][0]<c[h][0]?b:h;for(b=0;b<i;++b)if(b!=h){k=c[b][1]-c[h][1];m=c[b][0]-c[h][0];a.push({a:Math.atan2(k,m),index:b})}a.sort(function(r,y){return r.a-y.a});v=a[0].a;n=a[0].index;x=0;for(b=1;b<g;++b){i=a[b].index;if(v==a[b].a){m=c[n][0]-c[h][0];k=c[n][1]-c[h][1];o=c[i][0]-c[h][0];p=c[i][1]-c[h][1];if(m*m+k*k>=o*o+p*p)a[b].index=-1;else{a[x].index=
-1;v=a[b].a;x=b;n=i}}else{v=a[b].a;x=b;n=i}}d.push(h);for(i=b=0;b<2;++i)if(a[i].index!=-1){d.push(a[i].index);b++}for(m=d.length;i<g;++i)if(a[i].index!=-1){for(;A(h,d[m-2],d[m-1],a[i].index,c);)--m;d[m++]=a[i].index}g=[];for(b=0;b<m;++b)g.push(c[d[b]]);return g};
function A(c,i,g,a,d){var b,h,m,k;h=d[g][1]-d[i][1];b=d[g][0]-d[i][0];m=b*b+h*h;h=d[a][1]-d[g][1];b=d[a][0]-d[g][0];k=b*b+h*h;h=d[a][1]-d[c][1];b=d[a][0]-d[c][0];a=b*b+h*h;h=d[i][1]-d[c][1];b=d[i][0]-d[c][0];i=b*b+h*h;h=d[g][1]-d[c][1];b=d[g][0]-d[c][0];c=b*b+h*h;return Math.PI-Math.acos((k+c-a)/(2*Math.sqrt(k*c)))-Math.acos((c+m-i)/(2*Math.sqrt(c*m)))<0}
d3.geom.polygon=function(c){c.area=function(){for(var i=0,g=c.length,a=c[g-1][0]*c[0][1],d=c[g-1][1]*c[0][0];++i<g;){a+=c[i-1][0]*c[i][1];d+=c[i-1][1]*c[i][0]}return(d-a)*0.5};c.clip=function(i){for(var g,a=-1,d=c.length,b,h,m=c[d-1],k,o,p;++a<d;){g=i.slice();i.length=0;k=c[a];o=g[(h=g.length)-1];for(b=-1;++b<h;){p=g[b];if(B(p,m,k)){B(o,m,k)||i.push(C(o,p,m,k));i.push(p)}else B(o,m,k)&&i.push(C(o,p,m,k));o=p}m=k}return i};return c};
function B(c,i,g){return(g[0]-i[0])*(c[1]-i[1])<(g[1]-i[1])*(c[0]-i[0])}function C(c,i,g,a){var d=c[0],b=g[0];c=c[1];var h=g[1];g=i[0]-d;var m=a[0]-b;i=i[1]-c;a=a[1]-h;b=(m*(c-h)-a*(d-b))/(a*g-m*i);return[d+b*g,c+b*i]}
d3.geom.voronoi=function(c){var i=c.map(function(){return[]});D(c,function(g){var a,d,b,h;if(g.i==1&&g.b>=0){a=g.o.r;d=g.o.l}else{a=g.o.l;d=g.o.r}if(g.i==1){b=a?a.y:-1E6;a=g.c-g.b*b;h=d?d.y:1E6;d=g.c-g.b*h}else{a=a?a.x:-1E6;b=g.c-g.i*a;d=d?d.x:1E6;h=g.c-g.i*d}a=[a,b];d=[d,h];i[g.region.l.index].push(a,d);i[g.region.r.index].push(a,d)});return i.map(function(g,a){var d=c[a][0],b=c[a][1];g.forEach(function(h){h.a=Math.atan2(h[0]-d,h[1]-b)});return g.sort(function(h,m){return h.a-m.a}).filter(function(h,
m){return!m||h.a-g[m-1].a>1.0E-10})})};var E={l:"r",r:"l"};
function D(c,i){var g={d:c.map(function(e,j){return{index:j,x:e[0],y:e[1]}}).sort(function(e,j){return e.y<j.y?-1:e.y>j.y?1:e.x<j.x?-1:e.x>j.x?1:0}),A:s},a={d:[],p:s,q:s,G:function(){a.p=a.t(s,"l");a.q=a.t(s,"l");a.p.r=a.q;a.q.l=a.p;a.d.unshift(a.p,a.q)},t:function(e,j){return{j:e,k:j,z:s,l:s,r:s}},m:function(e,j){j.l=e;j.r=e.r;e.r.l=j;e.r=j},H:function(e){var j=a.p;do j=j.r;while(j!=a.q&&d.J(j,e));return j=j.l},n:function(e){e.l.r=e.r;e.r.l=e.l;e.j=s},right:function(e){return e.r},left:function(e){return e.l},
I:function(e){return e.j==s?g.A:e.j.region[e.k]},D:function(e){return e.j==s?g.A:e.j.region[E[e.k]]}},d={C:function(e,j){var f={region:{l:e,r:j},o:{l:s,r:s}},l=j.x-e.x,q=j.y-e.y,u=l>0?l:-l,t=q>0?q:-q;f.c=e.x*l+e.y*q+(l*l+q*q)*0.5;if(u>t){f.i=1;f.b=q/l;f.c/=l}else{f.b=1;f.i=l/q;f.c/=q}return f},w:function(e,j){var f=e.j,l=j.j;if(!f||!l||f.region.r==l.region.r)return s;var q=f.i*l.b-f.b*l.i;if(Math.abs(q)<1.0E-10)return s;var u=(f.c*l.b-l.c*f.b)/q;q=(l.c*f.i-f.c*l.i)/q;var t=f.region.r,z=l.region.r;
if(t.y<z.y||t.y==z.y&&t.x<z.x){t=e;f=f}else{t=j;f=l}if((f=u>=f.region.r.x)&&t.k=="l"||!f&&t.k=="r")return s;return{x:u,y:q}},J:function(e,j){var f=e.j,l=f.region.r,q=j.x>l.x;if(q&&e.k=="l")return 1;if(!q&&e.k=="r")return 0;if(f.i==1){var u=j.y-l.y,t=j.x-l.x,z=0,w=0;if(!q&&f.b<0||q&&f.b>=0)w=z=u>=f.b*t;else{w=j.x+j.y*f.b>f.c;if(f.b<0)w=!w;w||(z=1)}if(!z){l=l.x-f.region.l.x;w=f.b*(t*t-u*u)<l*u*(1+2*t/l+f.b*f.b);if(f.b<0)w=!w}}else{t=f.c-f.i*j.x;f=j.y-t;u=j.x-l.x;l=t-l.y;w=f*f>u*u+l*l}return e.k=="l"?
w:!w},B:function(e,j,f){e.o[j]=f;e.o[E[j]]&&i(e)},v:function(e,j){var f=e.x-j.x,l=e.y-j.y;return Math.sqrt(f*f+l*l)}},b={d:[],m:function(e,j,f){e.z=j;e.u=j.y+f;f=0;for(var l=b.d,q=l.length;f<q;f++){var u=l[f];if(!(e.u>u.u||e.u==u.u&&j.x>u.z.x))break}l.splice(f,0,e)},n:function(e){for(var j=0,f=b.d,l=f.length;j<l&&f[j]!=e;++j);f.splice(j,1)},empty:function(){return b.d.length==0},K:function(e){for(var j=0,f=b.d,l=f.length;j<l;++j)if(f[j]==e)return f[j+1];return s},min:function(){var e=b.d[0];return{x:e.z.x,
y:e.u}},F:function(){return b.d.shift()}};a.G();g.A=g.d.shift();for(var h=g.d.shift(),m,k,o,p,x,n,v,r,y;;){b.empty()||(m=b.min());if(h&&(b.empty()||h.y<m.y||h.y==m.y&&h.x<m.x)){k=a.H(h);o=a.right(k);v=a.D(k);y=d.C(v,h);n=a.t(y,"l");a.m(k,n);if(r=d.w(k,n)){b.n(k);b.m(k,r,d.v(r,h))}k=n;n=a.t(y,"r");a.m(k,n);(r=d.w(n,o))&&b.m(n,r,d.v(r,h));h=g.d.shift()}else if(b.empty())break;else{k=b.F();p=a.left(k);o=a.right(k);x=a.right(o);v=a.I(k);n=a.D(o);r=k.z;d.B(k.j,k.k,r);d.B(o.j,o.k,r);a.n(k);b.n(o);a.n(o);
k="l";if(v.y>n.y){k=v;v=n;n=k;k="r"}y=d.C(v,n);n=a.t(y,k);a.m(p,n);d.B(y,E[k],r);if(r=d.w(p,n)){b.n(p);b.m(p,r,d.v(r,v))}(r=d.w(n,x))&&b.m(n,r,d.v(r,v))}}for(k=a.right(a.p);k!=a.q;k=a.right(k))i(k.j)}
d3.geom.delaunay=function(c){var i=c.map(function(){return[]}),g=[];D(c,function(a){i[a.region.l.index].push(c[a.region.r.index])});i.forEach(function(a,d){var b=c[d],h=b[0],m=b[1];a.forEach(function(p){p.a=Math.atan2(p[0]-h,p[1]-m)});a.sort(function(p,x){return p.a-x.a});for(var k=0,o=a.length-1;k<o;k++)g.push([b,a[k],a[k+1]])});return g};})()
