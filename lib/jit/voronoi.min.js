(function(){var m=null;
voronoi=function(q){var v=q.map(function(){return[]});A(q,function(h){var c,g,i,j;if(h.d==1&&h.a>=0){c=h.m.r;g=h.m.l}else{c=h.m.l;g=h.m.r}if(h.d==1){i=c?c.y:-1E6;c=h.b-h.a*i;j=g?g.y:1E6;g=h.b-h.a*j}else{c=c?c.x:-1E6;i=h.b-h.d*c;g=g?g.x:1E6;j=h.b-h.d*g}c=[c,i];g=[g,j];v[h.region.l.index].push(c,g);v[h.region.r.index].push(c,g)});return v.map(function(h,c){var g=q[c][0],i=q[c][1];h.forEach(function(j){j.j=Math.atan2(j[0]-g,j[1]-i)});return h.sort(function(j,r){return j.j-r.j}).filter(function(j,r){return!r||
j.j-h[r-1].j>1.0E-10})})};delaunay=function(q){var v=q.map(function(){return[]}),h=[];A(q,function(c){v[c.region.l.index].push(q[c.region.r.index])});v.forEach(function(c,g){var i=q[g],j=i[0],r=i[1];c.forEach(function(s){s.j=Math.atan2(s[0]-j,s[1]-r)});c.sort(function(s,z){return s.j-z.j});for(var f=0,t=c.length-1;f<t;f++)h.push([i,c[f],c[f+1]])});return h};var B={l:"r",r:"l"};
function A(q,v){var h={c:q.map(function(a,d){return{index:d,x:a[0],y:a[1]}}).sort(function(a,d){return a.y<d.y?-1:a.y>d.y?1:a.x<d.x?-1:a.x>d.x?1:0}),v:m},c={c:[],n:m,o:m,C:function(){c.n=c.p(m,"l");c.o=c.p(m,"l");c.n.r=c.o;c.o.l=c.n;c.c.unshift(c.n,c.o)},p:function(a,d){return{g:a,h:d,u:m,l:m,r:m}},i:function(a,d){d.l=a;d.r=a.r;a.r.l=d;a.r=d},D:function(a){var d=c.n;do d=d.r;while(d!=c.o&&g.G(d,a));return d=d.l},k:function(a){a.l.r=a.r;a.r.l=a.l;a.g=m},right:function(a){return a.r},left:function(a){return a.l},
F:function(a){return a.g==m?h.v:a.g.region[a.h]},A:function(a){return a.g==m?h.v:a.g.region[B[a.h]]}},g={z:function(a,d){var b={region:{l:a,r:d},m:{l:m,r:m}},e=d.x-a.x,k=d.y-a.y,o=e>0?e:-e,n=k>0?k:-k;b.b=a.x*e+a.y*k+(e*e+k*k)*0.5;if(o>n){b.d=1;b.a=k/e;b.b/=e}else{b.a=1;b.d=e/k;b.b/=k}return b},t:function(a,d){var b=a.g,e=d.g;if(!b||!e||b.region.r==e.region.r)return m;var k=b.d*e.a-b.a*e.d;if(Math.abs(k)<1.0E-10)return m;var o=(b.b*e.a-e.b*b.a)/k;k=(e.b*b.d-b.b*e.d)/k;var n=b.region.r,x=e.region.r;
if(n.y<x.y||n.y==x.y&&n.x<x.x){n=a;b=b}else{n=d;b=e}if((b=o>=b.region.r.x)&&n.h=="l"||!b&&n.h=="r")return m;return{x:o,y:k}},G:function(a,d){var b=a.g,e=b.region.r,k=d.x>e.x;if(k&&a.h=="l")return 1;if(!k&&a.h=="r")return 0;if(b.d==1){var o=d.y-e.y,n=d.x-e.x,x=0,u=0;if(!k&&b.a<0||k&&b.a>=0)u=x=o>=b.a*n;else{u=d.x+d.y*b.a>b.b;if(b.a<0)u=!u;u||(x=1)}if(!x){e=e.x-b.region.l.x;u=b.a*(n*n-o*o)<e*o*(1+2*n/e+b.a*b.a);if(b.a<0)u=!u}}else{n=b.b-b.d*d.x;b=d.y-n;o=d.x-e.x;e=n-e.y;u=b*b>o*o+e*e}return a.h=="l"?
u:!u},w:function(a,d,b){a.m[d]=b;a.m[B[d]]&&v(a)},s:function(a,d){var b=a.x-d.x,e=a.y-d.y;return Math.sqrt(b*b+e*e)}},i={c:[],i:function(a,d,b){a.u=d;a.q=d.y+b;b=0;for(var e=i.c,k=e.length;b<k;b++){var o=e[b];if(!(a.q>o.q||a.q==o.q&&d.x>o.u.x))break}e.splice(b,0,a)},k:function(a){for(var d=0,b=i.c,e=b.length;d<e&&b[d]!=a;++d);b.splice(d,1)},empty:function(){return i.c.length==0},H:function(a){for(var d=0,b=i.c,e=b.length;d<e;++d)if(b[d]==a)return b[d+1];return m},min:function(){var a=i.c[0];return{x:a.u.x,
y:a.q}},B:function(){return i.c.shift()}};c.C();h.v=h.c.shift();for(var j=h.c.shift(),r,f,t,s,z,l,w,p,y;;){i.empty()||(r=i.min());if(j&&(i.empty()||j.y<r.y||j.y==r.y&&j.x<r.x)){f=c.D(j);t=c.right(f);w=c.A(f);y=g.z(w,j);l=c.p(y,"l");c.i(f,l);if(p=g.t(f,l)){i.k(f);i.i(f,p,g.s(p,j))}f=l;l=c.p(y,"r");c.i(f,l);(p=g.t(l,t))&&i.i(l,p,g.s(p,j));j=h.c.shift()}else if(i.empty())break;else{f=i.B();s=c.left(f);t=c.right(f);z=c.right(t);w=c.F(f);l=c.A(t);p=f.u;g.w(f.g,f.h,p);g.w(t.g,t.h,p);c.k(f);i.k(t);c.k(t);
f="l";if(w.y>l.y){f=w;w=l;l=f;f="r"}y=g.z(w,l);l=c.p(y,f);c.i(s,l);g.w(y,B[f],p);if(p=g.t(s,l)){i.k(s);i.i(s,p,g.s(p,w))}(p=g.t(l,z))&&i.i(l,p,g.s(p,w))}}for(f=c.right(c.n);f!=c.o;f=c.right(f))v(f.g)};})()
