(function(){function A(a,b,c){function i(a,b){var c=a.__domain||(a.__domain=a.domain()),d=a.range().map(function(a){return(a-b)/h});a.domain(c).domain(d.map(a.invert))}var d=Math.pow(2,(q[2]=a)-c[2]),e=q[0]=b[0]-d*c[0],f=q[1]=b[1]-d*c[1],g=d3.event,h=Math.pow(2,a);d3.event={scale:h,translate:[e,f],transform:function(a,b){a&&i(a,e),b&&i(b,f)}};try{r.apply(s,t)}finally{d3.event=g}g.preventDefault()}function z(){m&&(y(),m=null)}function y(){n=null,m&&A(q[2],d3.svg.mouse(s),m)}function x(){var a=d3.svg.touches(s);switch(a.length){case 1:var b=a[0];A(q[2],b,o[b.identifier]);break;case 2:var c=a[0],d=a[1],e=[(c[0]+d[0])/2,(c[1]+d[1])/2],f=o[c.identifier],g=o[d.identifier],h=[(f[0]+g[0])/2,(f[1]+g[1])/2,f[2]];A(Math.log(d3.event.scale)/Math.LN2+f[2],e,h)}}function w(){var a=d3.svg.touches(s),b=-1,c=a.length,d;while(++b<c)o[(d=a[b]).identifier]=u(d);return a}function v(){l||(l=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var a=d3.event,b;try{l.scrollTop=1e3,l.dispatchEvent(a),b=1e3-l.scrollTop}catch(c){b=a.wheelDelta||-a.detail}return b*.005}function u(a){return[a[0]-q[0],a[1]-q[1],q[2]]}function k(){d3.event.stopPropagation(),d3.event.preventDefault()}function j(){d&&(k(),d=!1)}function i(){if(!!b){var a=e();if(!a)return;c&&(d=!0,k(),d3.event.type==="mouseup"&&h()),f(g(a),"dragend"),d3_behavior_dragForce=b=null}}function h(){if(!!b){var a=e();if(!a)return;f(g(a),"drag"),c=!0,k()}}function g(a){return d3.event.touches?d3.svg.touches(a)[0]:d3.svg.mouse(a)}function f(c,d){var e=d3.event;d3.event={position:c};try{a[d].dispatch.apply(b,d3_behavior_dragArguments)}finally{d3.event=e}e.preventDefault()}function e(){var a=b.parentNode;a||i();return a}d3.behavior={},d3.behavior.drag=function(){function m(){l.apply(this,arguments);var a=e();!a||f(g(a),"dragstart")}function l(){a=d,b=this,c=!1,d3_behavior_dragArguments=arguments}function k(){this.on("mousedown.drag",m).on("touchstart.drag",m),d3.select(window).on("mousemove.drag",h).on("touchmove.drag",h).on("mouseup.drag",i,!0).on("touchend.drag",i,!0).on("click.drag",j,!0)}var d=d3.dispatch("drag","dragstart","dragend");k.on=function(a,b){d[a].add(b);return k};return k};var a,b,c,d;d3.behavior.zoom=function(){function h(){d.apply(this,arguments);var b=w(),c,e=Date.now();b.length===1&&e-p<300&&A(1+Math.floor(a[2]),c=b[0],o[c.identifier]),p=e}function g(){d.apply(this,arguments);var b=d3.svg.mouse(s);A(d3.event.shiftKey?Math.ceil(a[2]-1):Math.floor(a[2]+1),b,u(b))}function f(){d.apply(this,arguments),n||(n=u(d3.svg.mouse(s))),A(v()+a[2],d3.svg.mouse(s),n)}function e(){d.apply(this,arguments),m=u(d3.svg.mouse(s)),d3.event.preventDefault(),window.focus()}function d(){q=a,r=b.zoom.dispatch,s=this,t=arguments}function c(){this.on("mousedown.zoom",e).on("mousewheel.zoom",f).on("DOMMouseScroll.zoom",g).on("dblclick.zoom",g).on("touchstart.zoom",h),d3.select(window).on("mousemove.zoom",y).on("mouseup.zoom",z).on("touchmove.zoom",x).on("touchend.zoom",w)}var a=[0,0,0],b=d3.dispatch("zoom");c.on=function(a,d){b[a].add(d);return c};return c};var l,m,n,o={},p=0,q,r,s,t})()