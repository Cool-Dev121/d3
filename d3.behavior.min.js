(function(){d3.behavior={},d3.behavior.zoom=function(){function p(a,b){function i(a,b){var c=a.__domain||(a.__domain=a.domain()),d=a.range().map(function(a){return(a-b)/h});a.domain(c).domain(d.map(a.invert))}var g=d3.event,h=Math.pow(2,e);d3.event={scale:h,translate:[c,d],transform:function(a,b){a&&i(a,c),b&&i(b,d)}};try{for(var j=0,k=f.length;j<k;j++)f[j].call(this,a,b)}finally{d3.event=g}}function o(f,g){var i=d3.event;if(!h){var j=d3.svg.mouse(this.nearestViewportElement||this);h={x0:c,y0:d,z0:e,x1:c-j[0],y1:d-j[1]}}if(i.type==="dblclick")e=i.shiftKey?Math.ceil(e-1):Math.floor(e+1);else{var k=(i.wheelDelta/120||-i.detail)*.1;if(a<0){var l=Date.now(),m=l-b;m>9&&Math.abs(i.wheelDelta)/m>=50&&(a=1),b=l}a===1&&(k*=.03),e+=k}var n=Math.pow(2,e-h.z0)-1;c=h.x0+h.x1*n,d=h.y0+h.y1*n,p.call(this,f,g)}function n(){g&&(m(),g=null)}function m(){h=null,g&&(c=d3.event.clientX+g.x0,d=d3.event.clientY+g.y0,p.call(g.target,g.data,g.index))}function l(a,b){g={x0:c-d3.event.clientX,y0:d-d3.event.clientY,target:this,data:a,index:b},d3.event.preventDefault(),window.focus()}function k(a,b){var f=d3.event;switch(f.touches.length){case 1:var i=f.touches[0];g&&(c=i.clientX+g.x0,d=i.clientY+g.y0,p.call(g.target,g.data,g.index)),f.preventDefault();break;case 2:var i=f.touches[0],j=f.touches[1],k=f.scale-1;c=g.x0+h.x1*k+(i.clientX+j.clientX)/2,d=g.y0+h.y1*k+(i.clientY+j.clientY)/2,e=h.z0+Math.log(f.scale)/Math.LN2,p.call(this,a,b),f.preventDefault()}}function j(a,b){var f=d3.event.touches.length,j=Date.now();if(f===1&&j-i<300){var k=d3.svg.touches(this.nearestViewportElement||this)[0],l=e;e=Math.floor(e)+1;var m=Math.pow(2,e-l)-1;c+=(c-k[0])*m,d+=(d-k[1])*m,p.call(this,a,b)}else if(f>0){var k,n=d3.event.touches[0];if(f>1){var o=d3.svg.touches(this.nearestViewportElement||this),q=d3.event.touches[1];h={x1:c-(o[0][0]+o[1][0])/2,y1:d-(o[0][1]+o[1][1])/2,z0:e},k=[(n.clientX+q.clientX)/2,(n.clientY+q.clientY)/2]}else k=[n.clientX,n.clientY];g={x0:c-k[0],y0:d-k[1],target:this,data:a,index:b}}i=j,d3.event.preventDefault(),window.focus()}function h(){var a=this.on("mousedown",l).on("mousewheel",o).on("DOMMouseScroll",o).on("dblclick",o).on("touchstart",j);d3.select(window).on("mousemove",m).on("mouseup",n).on("touchmove",k)}var a=/WebKit\/533/.test(navigator.userAgent)?-1:0,b=0,c=0,d=0,e=0,f=[],g,h,i=0;h.on=function(a,b){a=="zoom"&&f.push(b);return h};return h}})()