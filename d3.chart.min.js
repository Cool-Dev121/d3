(function(){function r(a){return a.y}function q(a){return a.x}function p(a,b){var c=b.length-1;b=b.slice().sort(d3.ascending);return d3.range(a).map(function(d){return b[~~(d*c/a)]})}function o(a){return a[1]}function n(a){return a[0]}function k(a){var b=a(0);return function(c){return Math.abs(a(c)-b)}}function j(a){return function(b){return"translate("+a(b)+",0)"}}function i(a){return a.measures}function h(a){return a.markers}function g(a){return a.ranges}function f(a){return[d3.quantile(a,.25),d3.quantile(a,.5),d3.quantile(a,.75)]}function e(a){return[0,a.length-1]}function d(a){var b=a.domain(),c=b[0],d=b[b.length-1];return c<d?[c,d]:[d,c]}function c(a,b,c){f=[];if(c&&b.length>1){var e=d(a),f,g=-1,h=b.length,i=(b[1]-b[0])/++c,j,k;while(++g<h)for(j=c;--j>0;)(k=+b[g]-j*i)>=e[0]&&f.push(k);for(--g,j=0;++j<c&&(k=+b[g]+j*i)<e[1];)f.push(k)}return f}function b(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function a(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}d3.chart={},d3.chart.axis=function(){function m(m){m.each(function(n,o,p){function I(a){return m.delay?a.transition().delay(m[p][o].delay).duration(m[p][o].duration).ease(m.ease()):a}var q=d3.select(this),r=d.ticks.apply(d,j),s=k||d.tickFormat.apply(d,j),t=c(d,r,l),u=q.selectAll(".minor").data(t,String),v=u.enter().insert("svg:line","g").attr("class","tick minor").style("opacity",1e-6),w=I(u.exit()).style("opacity",1e-6).remove(),x=I(u).style("opacity",1),y=q.selectAll("g").data(r,String),z=y.enter().insert("svg:g","path").style("opacity",1e-6),A=I(y.exit()).style("opacity",1e-6).remove(),B=I(y).style("opacity",1),C,D=d.range(),E=q.selectAll(".domain").data([]),F=E.enter().append("svg:path").attr("class","domain"),G=I(E),H=this.__chart__||d;this.__chart__=d.copy(),z.append("svg:line").attr("class","tick"),z.append("svg:text"),B.select("text").text(s);switch(e){case"bottom":C=a,x.attr("y2",g),z.select("text").attr("dy",".71em").attr("text-anchor","middle"),B.select("line").attr("y2",f),B.select("text").attr("y",Math.max(f,0)+i),G.attr("d","M"+D[0]+","+h+"V0H"+D[1]+"V"+h);break;case"top":C=a,x.attr("y2",-g),z.select("text").attr("text-anchor","middle"),B.select("line").attr("y2",-f),B.select("text").attr("y",-(Math.max(f,0)+i)),G.attr("d","M"+D[0]+","+ -h+"V0H"+D[1]+"V"+ -h);break;case"left":C=b,x.attr("x2",-g),z.select("text").attr("dy",".32em").attr("text-anchor","end"),B.select("line").attr("x2",-f),B.select("text").attr("x",-(Math.max(f,0)+i)),G.attr("d","M"+ -h+","+D[0]+"H0V"+D[1]+"H"+ -h);break;case"right":C=b,x.attr("x2",g),z.select("text").attr("dy",".32em"),B.select("line").attr("x2",f),B.select("text").attr("x",Math.max(f,0)+i),G.attr("d","M"+h+","+D[0]+"H0V"+D[1]+"H"+h)}z.call(C,H),B.call(C,d),A.call(C,d),v.call(C,H),x.call(C,d),w.call(C,d)})}var d=d3.scale.linear(),e="bottom",f=6,g=6,h=6,i=3,j=[10],k,l=0;m.scale=function(a){if(!arguments.length)return d;d=a;return m},m.orient=function(a){if(!arguments.length)return e;e=a;return m},m.ticks=function(){if(!arguments.length)return j;j=arguments;return m},m.tickFormat=function(a){if(!arguments.length)return k;k=a;return m},m.tickSize=function(a,b,c){if(!arguments.length)return f;var d=arguments.length-1;f=+a,g=d>1?+b:f,h=d>0?+arguments[d]:f;return m},m.tickPadding=function(a){if(!arguments.length)return i;i=+a;return m},m.tickSubdivide=function(a){if(!arguments.length)return l;l=+a;return m};return m},d3.chart.box=function(){function k(e){e.each(function(e,f){e=e.map(g).sort(d3.ascending);var k=d3.select(this),l=e.length,m=e[0],n=e[l-1],o=e.quartiles=i(e),p=h&&h.call(this,e,f),q=p&&p.map(function(a){return e[a]}),r=p?d3.range(0,p[0]).concat(d3.range(p[1]+1,l)):d3.range(l),s=d3.scale.linear().domain(d&&d.call(this,e,f)||[m,n]).range([b,0]),t=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(s.range());this.__chart__=s;var u=k.selectAll("line.center").data(q?[q]:[]);u.enter().insert("svg:line","rect").attr("class","center").attr("x1",a/2).attr("y1",function(a){return t(a[0])}).attr("x2",a/2).attr("y2",function(a){return t(a[1])}).style("opacity",1e-6).transition().duration(c).style("opacity",1).attr("y1",function(a){return s(a[0])}).attr("y2",function(a){return s(a[1])}),u.transition().duration(c).style("opacity",1).attr("y1",function(a){return s(a[0])}).attr("y2",function(a){return s(a[1])}),u.exit().transition().duration(c).style("opacity",1e-6).attr("y1",function(a){return s(a[0])}).attr("y2",function(a){return s(a[1])}).remove();var v=k.selectAll("rect.box").data([o]);v.enter().append("svg:rect").attr("class","box").attr("x",0).attr("y",function(a){return t(a[2])}).attr("width",a).attr("height",function(a){return t(a[0])-t(a[2])}).transition().duration(c).attr("y",function(a){return s(a[2])}).attr("height",function(a){return s(a[0])-s(a[2])}),v.transition().duration(c).attr("y",function(a){return s(a[2])}).attr("height",function(a){return s(a[0])-s(a[2])});var w=k.selectAll("line.median").data([o[1]]);w.enter().append("svg:line").attr("class","median").attr("x1",0).attr("y1",t).attr("x2",a).attr("y2",t).transition().duration(c).attr("y1",s).attr("y2",s),w.transition().duration(c).attr("y1",s).attr("y2",s);var x=k.selectAll("line.whisker").data(q||[]);x.enter().insert("svg:line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",t).attr("x2",a).attr("y2",t).style("opacity",1e-6).transition().duration(c).attr("y1",s).attr("y2",s).style("opacity",1),x.transition().duration(c).attr("y1",s).attr("y2",s).style("opacity",1),x.exit().transition().duration(c).attr("y1",s).attr("y2",s).style("opacity",1e-6).remove();var y=k.selectAll("circle.outlier").data(r,Number);y.enter().insert("svg:circle","text").attr("class","outlier").attr("r",5).attr("cx",a/2).attr("cy",function(a){return t(e[a])}).style("opacity",1e-6).transition().duration(c).attr("cy",function(a){return s(e[a])}).style("opacity",1),y.transition().duration(c).attr("cy",function(a){return s(e[a])}).style("opacity",1),y.exit().transition().duration(c).attr("cy",function(a){return s(e[a])}).style("opacity",1e-6).remove();var z=j||s.tickFormat(8),A=k.selectAll("text.box").data(o);A.enter().append("svg:text").attr("class","box").attr("dy",".3em").attr("dx",function(a,b){return b&1?6:-6}).attr("x",function(b,c){return c&1?a:0}).attr("y",t).attr("text-anchor",function(a,b){return b&1?"start":"end"}).text(z).transition().duration(c).attr("y",s),A.transition().duration(c).text(z).attr("y",s);var B=k.selectAll("text.whisker").data(q||[]);B.enter().append("svg:text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",a).attr("y",t).text(z).style("opacity",1e-6).transition().duration(c).attr("y",s).style("opacity",1),B.transition().duration(c).text(z).attr("y",s).style("opacity",1),B.exit().transition().duration(c).attr("y",s).style("opacity",1e-6).remove()}),d3.timer.flush()}var a=1,b=1,c=0,d=null,g=Number,h=e,i=f,j=null;k.width=function(b){if(!arguments.length)return a;a=b;return k},k.height=function(a){if(!arguments.length)return b;b=a;return k},k.tickFormat=function(a){if(!arguments.length)return j;j=a;return k},k.duration=function(a){if(!arguments.length)return c;c=a;return k},k.domain=function(a){if(!arguments.length)return d;d=a==null?a:d3.functor(a);return k},k.value=function(a){if(!arguments.length)return g;g=a;return k},k.whiskers=function(a){if(!arguments.length)return h;h=a;return k},k.quartiles=function(a){if(!arguments.length)return i;i=a;return k};return k},d3.chart.bullet=function(){function o(a){a.each(function(a,g){var h=d.call(this,a,g).slice().sort(d3.descending),i=e.call(this,a,g).slice().sort(d3.descending),o=f.call(this,a,g).slice().sort(d3.descending),p=d3.select(this),q=d3.scale.linear().domain([0,Math.max(h[0],i[0],o[0])]).range(b?[l,0]:[0,l]),r=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(q.range());this.__chart__=q;var s=k(r),t=k(q),u=p.selectAll("rect.range").data(h);u.enter().append("svg:rect").attr("class",function(a,b){return"range s"+b}).attr("width",s).attr("height",m).attr("x",b?r:0).transition().duration(c).attr("width",t).attr("x",b?q:0),u.transition().duration(c).attr("x",b?q:0).attr("width",t).attr("height",m);var v=p.selectAll("rect.measure").data(o);v.enter().append("svg:rect").attr("class",function(a,b){return"measure s"+b}).attr("width",s).attr("height",m/3).attr("x",b?r:0).attr("y",m/3).transition().duration(c).attr("width",t).attr("x",b?q:0),v.transition().duration(c).attr("width",t).attr("height",m/3).attr("x",b?q:0).attr("y",m/3);var w=p.selectAll("line.marker").data(i);w.enter().append("svg:line").attr("class","marker").attr("x1",r).attr("x2",r).attr("y1",m/6).attr("y2",m*5/6).transition().duration(c).attr("x1",q).attr("x2",q),w.transition().duration(c).attr("x1",q).attr("x2",q).attr("y1",m/6).attr("y2",m*5/6);var x=n||q.tickFormat(8),y=p.selectAll("g.tick").data(q.ticks(8),function(a){return this.textContent||x(a)}),z=y.enter().append("svg:g").attr("class","tick").attr("transform",j(r)).style("opacity",1e-6);z.append("svg:line").attr("y1",m).attr("y2",m*7/6),z.append("svg:text").attr("text-anchor","middle").attr("dy","1em").attr("y",m*7/6).text(x),z.transition().duration(c).attr("transform",j(q)).style("opacity",1);var A=y.transition().duration(c).attr("transform",j(q)).style("opacity",1);A.select("line").attr("y1",m).attr("y2",m*7/6),A.select("text").attr("y",m*7/6),y.exit().transition().duration(c).attr("transform",j(q)).style("opacity",1e-6).remove()}),d3.timer.flush()}var a="left",b=!1,c=0,d=g,e=h,f=i,l=380,m=30,n=null;o.orient=function(c){if(!arguments.length)return a;a=c,b=a=="right"||a=="bottom";return o},o.ranges=function(a){if(!arguments.length)return d;d=a;return o},o.markers=function(a){if(!arguments.length)return e;e=a;return o},o.measures=function(a){if(!arguments.length)return f;f=a;return o},o.width=function(a){if(!arguments.length)return l;l=a;return o},o.height=function(a){if(!arguments.length)return m;m=a;return o},o.tickFormat=function(a){if(!arguments.length)return n;n=a;return o},o.duration=function(a){if(!arguments.length)return c;c=a;return o};return o},d3.chart.horizon=function(){function j(j){j.each(function(j,k){var n=d3.select(this),o=2*a+1,p=Infinity,q=-Infinity,r=-Infinity,s,t,u,v=j.map(function(a,b){var c=d.call(this,a,b),f=e.call(this,a,b);c<p&&(p=c),c>q&&(q=c),-f>r&&(r=-f),f>r&&(r=f);return[c,f]}),z=d3.scale.linear().domain([p,q]).range([0,f]),A=d3.scale.linear().domain([0,r]).range([0,g*a]);this.__chart__?(s=this.__chart__.x,t=this.__chart__.y,u=this.__chart__.id):(s=d3.scale.linear().domain([0,Infinity]).range(z.range()),t=d3.scale.linear().domain([0,Infinity]).range(A.range()),u=++m);var B=n.selectAll("defs").data([v]),C=B.enter().append("svg:defs");C.append("svg:clipPath").attr("id","d3_chart_horizon_clip"+u).append("svg:rect").attr("width",f).attr("height",g),B.select("rect").transition().duration(h).attr("width",f).attr("height",g),C.append("svg:path").attr("id","d3_chart_horizon_path"+u).attr("d",l.interpolate(c).x(function(a){return s(a[0])}).y0(g*a).y1(function(b){return g*a-t(b[1])})).transition().duration(h).attr("d",l.x(function(a){return z(a[0])}).y1(function(b){return g*a-A(b[1])})),B.select("path").transition().duration(h).attr("d",l),n.selectAll("g").data([null]).enter().append("svg:g").attr("clip-path","url(#d3_chart_horizon_clip"+u+")");var D=b=="offset"?function(b){return"translate(0,"+(b+(b<0)-a)*g+")"}:function(b){return(b<0?"scale(1,-1)":"")+"translate(0,"+(b-a)*g+")"},E=n.select("g").selectAll("use").data(d3.range(-1,-a-1,-1).concat(d3.range(1,a+1)),Number);E.enter().append("svg:use").attr("xlink:href","#d3_chart_horizon_path"+u).attr("transform",function(a){return D(a+(a>0?1:-1))}).style("fill",i).transition().duration(h).attr("transform",D),E.transition().duration(h).attr("transform",D).style("fill",i),E.exit().transition().duration(h).attr("transform",D).remove(),this.__chart__={x:z,y:A,id:u}}),d3.timer.flush()}var a=1,b="offset",c="linear",d=n,e=o,f=960,g=40,h=0,i=d3.scale.linear().domain([-1,0,1]).range(["#d62728","#fff","#1f77b4"]);j.duration=function(a){if(!arguments.length)return h;h=+a;return j},j.bands=function(b){if(!arguments.length)return a;a=+b,i.domain([-a,0,a]);return j},j.mode=function(a){if(!arguments.length)return b;b=a+"";return j},j.colors=function(a){if(!arguments.length)return i.range();i.range(a);return j},j.interpolate=function(a){if(!arguments.length)return c;c=a+"";return j},j.x=function(a){if(!arguments.length)return d;d=a;return j},j.y=function(a){if(!arguments.length)return e;e=a;return j},j.width=function(a){if(!arguments.length)return f;f=+a;return j},j.height=function(a){if(!arguments.length)return g;g=+a;return j};return j};var l=d3.svg.area(),m=0;d3.chart.qq=function(){function i(i){i.each(function(i,j){var k=d3.select(this),l=p(f,g.call(this,i,j)),m=p(f,h.call(this,i,j)),n=d&&d.call(this,i,j)||[d3.min(l),d3.max(l)],o=d&&d.call(this,i,j)||[d3.min(m),d3.max(m)],q,r,s=d3.scale.linear().domain(n).range([0,a]),t=d3.scale.linear().domain(o).range([b,0]);this.__chart__?(q=this.__chart__.x,r=this.__chart__.y):(q=d3.scale.linear().domain([0,Infinity]).range(s.range()),r=d3.scale.linear().domain([0,Infinity]).range(t.range())),this.__chart__={x:s,y:t};var u=k.selectAll("line.diagonal").data([null]);u.enter().append("svg:line").attr("class","diagonal").attr("x1",s(o[0])).attr("y1",t(n[0])).attr("x2",s(o[1])).attr("y2",t(n[1])),u.transition().duration(c).attr("x1",s(o[0])).attr("y1",t(n[0])).attr("x2",s(o[1])).attr("y2",t(n[1]));var v=k.selectAll("circle").data(d3.range(f).map(function(a){return{x:l[a],y:m[a]}}));v.enter().append("svg:circle").attr("class","quantile").attr("r",4.5).attr("cx",function(a){return q(a.x)}).attr("cy",function(a){return r(a.y)}).style("opacity",1e-6).transition().duration(c).attr("cx",function(a){return s(a.x)}).attr("cy",function(a){return t(a.y)}).style("opacity",1),v.transition().duration(c).attr("cx",function(a){return s(a.x)}).attr("cy",function(a){return t(a.y)}).style("opacity",1),v.exit().transition().duration(c).attr("cx",function(a){return s(a.x)}).attr("cy",function(a){return t(a.y)}).style("opacity",1e-6).remove();var w=e||s.tickFormat(4),z=e||t.tickFormat(4),A=function(a){return"translate("+s(a)+","+b+")"},B=function(a){return"translate(0,"+t(a)+")"},C=k.selectAll("g.x.tick").data(s.ticks(4),function(a){return this.textContent||w(a)}),D=C.enter().append("svg:g").attr("class","x tick").attr("transform",function(a){return"translate("+q(a)+","+b+")"}).style("opacity",1e-6);D.append("svg:line").attr("y1",0).attr("y2",-6),D.append("svg:text").attr("text-anchor","middle").attr("dy","1em").text(w),D.transition().duration(c).attr("transform",A).style("opacity",1),C.transition().duration(c).attr("transform",A).style("opacity",1),C.exit().transition().duration(c).attr("transform",A).style("opacity",1e-6).remove();var E=k.selectAll("g.y.tick").data(t.ticks(4),function(a){return this.textContent||z(a)}),F=E.enter().append("svg:g").attr("class","y tick").attr("transform",function(a){return"translate(0,"+r(a)+")"}).style("opacity",1e-6);F.append("svg:line").attr("x1",0).attr("x2",6),F.append("svg:text").attr("text-anchor","end").attr("dx","-.5em").attr("dy",".3em").text(z),F.transition().duration(c).attr("transform",B).style("opacity",1),E.transition().duration(c).attr("transform",B).style("opacity",1),E.exit().transition().duration(c).attr("transform",B).style("opacity",1e-6).remove()})}var a=1,b=1,c=0,d=null,e=null,f=100,g=q,h=r;i.width=function(b){if(!arguments.length)return a;a=b;return i},i.height=function(a){if(!arguments.length)return b;b=a;return i},i.duration=function(a){if(!arguments.length)return c;c=a;return i},i.domain=function(a){if(!arguments.length)return d;d=a==null?a:d3.functor(a);return i},i.count=function(a){if(!arguments.length)return f;f=a;return i},i.x=function(a){if(!arguments.length)return g;g=a;return i},i.y=function(a){if(!arguments.length)return h;h=a;return i},i.tickFormat=function(a){if(!arguments.length)return e;e=a;return i};return i}})()